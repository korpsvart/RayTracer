<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/uikit.min.css" />
    <script src="js/uikit.min.js"></script>
    <script src="js/uikit-icons.min.js"></script>
    <script src="https://fred-wang.github.io/mathml.css/mspace.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
</head>
<body>
<div class="uk-container uk-container-small">
    <nav class="uk-navbar-container" uk-navbar>
        <div class="uk-navbar-left">
            <ul class="uk-navbar-nav">
                <li class="uk-active"><a href=""></a></li>
                <li class="uk-parent"><a href=""></a></li>
                <li class="uk-position-left"><a href="index.html">Presentazione</a></li>
                <li class="uk-position-center"><a href="theory.html">Teoria</a></li>
                <li class="uk-position-right"><a href="download.html">Download</a></li>
            </ul>
        </div>
    </nav>
    <h1 class="uk-heading-large uk-heading-divider">Raytracing</h1>
    <p>Il ray tracing è una tecnica di rendering in grado di produrre immagini virtuali con un elevato livello di realismo,
        pur basandosi su un principio molto semplice. L'idea è quella di seguire il percorso della luce all'interno della scena,
        che parte da una sorgente luminosa e interagisce con l'ambiente circostante
        (attraverso fenomeni fisici come rifrazione, riflessione, diffusione....)
        prima di raggiungere il nostro occhio, rendendo quindi visibili gli oggetti.
        <br>
        In realtà, a livello computazionale è molto più efficiente seguire questo percorso in direzione opposta, immaginando
        che il raggio di luce parta dal nostro occhio, poichè solo una piccola parte dei raggi emessi da una sorgente luminosa
        raggiunge effettivamente l'occhio.
        Questo approccio prende in particolare il nome di <b>backward ray tracing</b>.
        <br>
        Per creare un immagine digitale 2D formata da pixel, un raggio di questo tipo (detto <b>primary </b> o <b>view ray</b>) viene
        creato per ciascuno dei pixel. Se tale raggio interseca (<b><i>visibility problem</i></b>) un oggetto della scena, è possibile quindi calcolare
        l'illuminazione di tale oggetto nel punto di intersezione (procedimento che prende il nome di <b>shading</b>) ed assegnare
        il colore risultante al pixel d'interesse.
        <img src="img/ray_tracing.png">
    </p>
    <h1 class="uk-heading-medium uk-heading-divider">Shading</h1>
    <p>Il modo in cui viene calcolata l'illuminazione di un punto della scena dipende principalmente dalle proprietà del materiale
    di cui è composto l'oggetto che stiamo guardando, che determinano il modo in cui la luce interagisce con esso.
        Dal punto di vista della <b>riflessione</b>, possiamo identificare tre tipi di riflessione:
    <ul class="uk-list uk-list-disc">
        <li>Rifflessione speculare: si ottiene attraverso la <b>legge della riflessione</b>, che afferma
            <ul class="uk-list uk-list-bullet">
                <li>Il raggio di incidenza, la normale alla superficie e il raggio riflesso sono coplanari;</li>
                <li>L'angolo di incidenza è uguale all'angolo di riflessione.</li>
            </ul>
            Questo tipo di riflessione è evidente negli specchi e più in generale nei materiali cosiddetti <i>lucidi</i>.
        </li>
        <li>Riflessione diffusa: si ha quando la luce proveniente da una direzione viene riflessa in molteplici direzioni diverse, invece che essere
            concentrata in un'unica direzione come succede nel caso della riflessione speculare.
            Questo tipo di riflessione è evidente negli oggetti detti <i>opachi</i>. Per un oggetto opaco ideale, la luce incidente viene riflessa equamente in tutte
            le direzioni, ne consegue quindi che l'illuminazione percepita non cambia al variare della direzione da cui guardiamo l'oggetto (<i>view direction</i>).
            Questo tipo di superficie ideale è anche nota come <b>superficie Lambertiana</b>.
        </li>
    </ul>
    Chiaramente, gli oggetti reali esibiscono sempre una componente di riflessione specualare ed una di riflessione diffusa.
    Alcuni modelli empirici utilizzati per simulare l'illuminazione di oggetti reali funzionano combinando
    opportunamente l'illuminazione che si avrebbe da una superficie perfettamente speculare con quella
    ottenibile da una perfettamente diffusa (vedi il <b>modello di Phong</b>).
    <br>
    Il programma prevede tre tipi di oggetti, a seconda del modo in cui interagiscono con la luce:
    <ul class="uk-list uk-list-disc">
        <li>Oggetti <i>diffuse</i> (opachi, o <i>diffondenti</i>)</li>
        <li>Oggetti <i>Phong</i> (seguono il modello di Phong)</li>
        <li>Oggetti <i>mirror-like</i> (specchi)</li>
        <li>Oggetti <i>trasparenti</i> (e.g.: acqua, vetro, ...)</li>
    </ul>
    </p>
    <h1 class="uk-heading-small uk-heading-divider">Fonti luminose</h1>
    <p>
    Sono previsti due tipi di fonti luminose:
    <ul class="uk-list uk-list-disc">
        <li>Luci puntiformi (o luci sferiche): definite unicamente dalla loro posizione nello spazio (non sono influenzate
        da rotazioni o scalature, in quanto adimensionali). Utili per rappresentare piccole fonti di luce come
        lampadine, di cui però viene ignorata la "fisicità" per maggiore semplicità.</li>
        <li>Luci distanti: definite unicamente dalla loro direzione (non sono influenzate da traslazioni
        o scalature). Utili per rappresentare fonti luminose molto distanti, come il Sole, per cui si possono
        considerare tutti i raggi emessi come paralleli tra loro.</li>
    </ul>
    Oltre alle proprietà sopra descritte, ogni fonte luminosa è definita da <b>colore</b> ed <b>intensità</b>.
    <h2 class="uk-heading-small uk-heading-divider">Square rolloff</h2>
    Per le luci sferiche , l'illuminazione dipende anche dalla distanza a cui un oggetto si trova.
    Più precisamente, si può considerare una luce sferica puntiforme come una fonte luminosa isotropa, che emette luce in maniera
    uguale in tutte le direzioni. In tal caso, si può applicare la seguente legge di proporzionalità:
    <br>
    \(I = \frac{P}{4\pi r^{2} }\)
    <br>
    Dove \(I\) è l'intensità luminosa, \(r\) è la distanza dalla sorgente e \(P\) è la potenza totale.
    </p>

    <h2 class="uk-heading-small uk-heading-divider">Illuminazione su superfici lambertiane</h2>
    <p>
    La legge di Lambert afferma che l'illuminamento prodotto da una sorgente su una superficie è direttamente
    proporzionale all'intensità luminosa della sorgente e al coseno dell'angolo che la normale alla superficie forma
    con la direzione dei raggi luminosi.
    <br>
    \( E = I\cdot \cos \alpha = I \cdot \textbf{n} \boldsymbol{\cdot}\textbf{l} \)
    <br>
    Dove \(\textbf{n} \) è il versore normale alla superficie, mentre \(\textbf{l} \) è il versore della direzione
    dei raggi luminosi.
    .Più precisamente, per una luce puntiforme \( \textbf{l} = \frac{\textbf{P}_{light} - \textbf{P}_{hit}}
    {\left \|  \textbf{P}_{light} - \textbf{P}_{hit}\right \|} \), dove \(\textbf{P}_{hit} \) è il punto
    considerato sulla superficie, mentre \( \textbf{P}_{light}\) è il punto che identifica la posizione di una sorgente
    luminosa puntiforme. Per una luce distante, invece, la direzione è una proprietà intrinseca della sorgente luminosa.
    <br>
    L'intensità luminosa che compare nella formula, \( I \), è calcolata per le sorgenti puntiformi utilizzando la legge inversa
    del quadrato descritta precedentemente, mentre per le luci distanti si utilizza direttamente l'intensità luminosa alla
    sorgente.
    <br>
    L'intensità luminosa della superficie dipende poi, ovviamente, anche da quanta della luce ricevuta viene riflessa
    nelle varie direzioni e da quanta viene invece assorbita. Il rapporto tra la quantità di luce emessa e quella ricevuta
    è detta <b>albedo</b>.
    Quindi, l'ammontare totale di energia luminosa riflessa dalla superficie diffondente è dato da:
    <br>
    \( F_{tot} = albedo \cdot E = albedo \cdot I\cdot \cos \alpha \)
    <br>
    Poichè questa energia viene distribuita uniformemente su un emisfero centrato sul punto osservato ed orientato
    nella direzione della normale alla superficie, per ottenere la quantità di luce riflessa nella direzione della visuale
    bisogna dividere per \( \pi \).
    <br>
    \( L = \frac{F_{tot}}{\pi} \)
    <br>
    Come anticipato, la quantità di luce riflessa è indipendente dalla direzione della visuale.
    <img src="img/diffuse_example.PNG">
    </p>
    <h2 class="uk-heading-small uk-heading-divider">Riflessione speculare</h2>
    Usando la legge della riflessione, date la direzione incidente \( \textbf{l} \) e la normale \( \textbf{n} \)
    (si assume entrambi siano vettori di norma unitaria) è facile calcolare la direzione della riflessione:
    <br>
    \( \textbf{r} = 2(\textbf{n}\cdot \textbf{i})\textbf{n} - \textbf{i} \)
    <br>
    <img src="img/reflection_dir.png">
    <br>
    A livello implementativo, quando la direzione della visuale interseca una superficie riflettente, calcoliamo
    la direzione di riflessione e generiamo un nuovo "raggio", avente come origine il punto di intersezione e come
    direzione quella di riflessione. Questo raggio può potenzialmente intersecare a sua volta una superficie riflettente,
    di conseguenza il processo è ricorsivo. Potenzialmente, una scena potrebbe causare una ricorsione infinita, o comunque
    generare un numero così elevato di riflessioni da rendere la computazione molto lenta (senza particolari miglioramnti
    dal punto di vista del realismo dell'immagine ottenuta).
    Per questo motivo, si definisce una costante che limita il numero massimo di livelli che può raggiungere questo
    procedimento ricorsivo (le immagini di esempio sono state generate usando come limite 5 livelli).
    <br>
    <img src="img/reflection_ex.PNG">
    <br>
    <h2 class="uk-heading-small uk-heading-divider">Rifrazione</h2>



</div>
</body>
</html>